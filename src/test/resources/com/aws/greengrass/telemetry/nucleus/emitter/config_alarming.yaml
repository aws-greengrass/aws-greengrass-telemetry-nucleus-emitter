---
services:
  aws.greengrass.Nucleus:
    configuration:
      runWithDefault:
        posixUser: nobody
  aws.greengrass.telemetry.NucleusEmitter:
    configuration:
      pubSubPublish: "true"
      mqttTopic: ""
      alertsMqttTopic: "alerts/topic"
      telemetryPublishIntervalMs: "60000"
      alarms:
        cpu:
          condition: ">="
          value: 0
          period: 1
          periodUnit: MINUTES
          datapoints: 1
          evaluationPeriod: 1
        memory:
          condition: ">="
          value: 0
          period: 1
          periodUnit: MINUTES
          datapoints: 1
          evaluationPeriod: 1
        disk:
          condition: ">="
          value: 0
          period: 1
          periodUnit: MINUTES
          datapoints: 1
          evaluationPeriod: 1
    dependencies:
      - "aws.greengrass.Nucleus:SOFT"
    version: "1.0.0"
  main:
    dependencies:
      - "aws.greengrass.telemetry.NucleusEmitter"
    lifecycle: {}
